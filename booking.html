<!DOCTYPE html>
<html>
<head>
  
    <title>Booking</title>
    <link rel="icon" href="images/logoDark.svg">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="css/booking.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>  
    
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #352222;" >
    <div class="container-fluid"  style="margin-left: 2rem;">
        <a class="navbar-brand" href="index.html" >
            <img src="images/logoLight.svg" alt="" width="30" height="30" class="d-inline-block align-text-top">
        </a>
        <h5 class="website-title">WesternBay</h5>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav" style="margin-right: 2rem;">
        <ul class="navbar-nav">
          <li class="nav-item h6">
            <a class="nav-link" href="menu.html">Menu</a>
          </li>
          <li class="nav-item h6">
            <a class="nav-link active" aria-current="page" href="bookNow.html">Book Now</a>
          </li>
          <li class="nav-item h6">
            <a class="nav-link" href="about.html">About</a>
          </li>
          <li class="nav-item h6">
            <div class="nav-item dropdown" style="position: relative; right: -20px; ">
              <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" > 
                  Webebey123
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink" style="font-family: 'Cairo', sans-serif;">
                  <a class="dropdown-item" href="editProfile.html">Edit Profile</a>
                  <a class="dropdown-item" href="myBooking.html">My Bookings</a>
                  <a class="dropdown-item" href="index.html">Sign Out</a>
                </div>
          </div>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  
  <main>
    <div class="booking-main">
      <div class="row"> 
          <div class="col-md-6 mt-5 h-75 d-inline-block container">
            <div id="cardForm" class="card shadow p-3 mb-5 bg-white rounded">
              <h2 id="main-section" class="h2 text-center"></h2>
              <div class="progress">
                <div id="prgBar" class="progress-bar" style="width:33%">1</div>
              </div>
              <form id="stepper-form" method="POST" class="was-validated">
                <section id="step1">
                <h1 class="text-center mt-3 mb-3" style="font-size:3rem;">Personal Details</h1>
                  <div class="row mt-3">
                    <div class="col-2"></div>
                    <div class="form-group col-md-4">
                      <input type="text" class="form-control" id="fname-input" placeholder="Enter your first name..." name="fname" required>
                      <div class="valid-feedback">Valid.</div>
                      <div class="invalid-feedback">Please fill out this field.</div>
                    </div>
                    <div class="form-group col-md-4">
                      <input type="text" class="form-control" id="lname-input" placeholder="Enter your last name..." name="lname" required>
                      <div class="valid-feedback">Valid.</div>
                      <div class="invalid-feedback">Please fill out this field.</div>
                    </div>
                    <div class="col-2"></div>
                  </div>
                  <div class="row mt-3">
                    <div class="form-group col-md-8 mx-auto">
                      <input type="email" class="form-control" id="email-input" placeholder="Enter your e-mail address..." name="email" required>
                      <div class="valid-feedback">Valid.</div>
                      <div class="invalid-feedback">Please fill out this field.</div>
                    </div>
                  </div>
                  <div class="row mt-3">
                    <div class="form-group col-md-8 mx-auto">
                      <input type="text" class="form-control" id="contact-input" placeholder="Enter your contact number..." name="contact" required>
                      <div class="valid-feedback">Valid.</div>
                      <div class="invalid-feedback">Please fill out this field.</div>
                    </div>
                  </div>
                  <div class="row mt-3">
                    <div class="col-8 mx-auto">
                    <label for="diningPax" id="dinerdesc">How many people will be dining in? (maximum 6 per reservation)</label>
                    <div class="form-group col-6 mt-2 mx-auto">
                      <div id= "diner-div">
                      <select id="diner-input" class="form-control">
                        <option selected>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option>6</option>
                        </select>
                      <span>person(s)</span>
                    </div>
                    </div>
                    </div>
                  </div>
                  </section>

                  <section id="step2">
                    <h1 class="text-center mt-3 mb-3">Reservation Details</h1>
                    <div class="row mt-3">
                      <div class="col-1"></div>
                      <div class="form-group col-md-5">
                        <label for="diningDate" id="date-label">Select your reservation date:</label>
                        <input type="date" class="form-control" id="date-input" min="2023-05-01" required>
                      </div>
                      <div class="form-group col-md-5">
                        <label for="diningTime" id="time-label">Select your preferred time:</label>
                        <input type="time" class="form-control" id="time-input" min="09:00:00" max="22:00:00" required>
                        <p style="font-size: 12px;"><i>*The maximum dining duration is 2 hours for each reservation.</i></p>
                      </div>
                      <div class="col-1"></div>
                    </div>
                    <div class="row mt-3">
                      <div class="form-group col-md-10 mx-auto">
                        <label for="diningDate" id="date">Select your table:</label>
                        <div class="row mt-3 mx-auto">
                          <div class="col-3"></div>
                          <div class="col-2">
                            <img id="labels" src="images/selectedlabel.png">
                          </div>
                          <div class="col-2">
                            <img id="labels" src="images/availablelabel.png">
                          </div>
                          <div class="col-2">
                            <img id="labels" src="images/unavailablelabel.png">
                          </div>
                          <div class="col-3"></div>

                        </div>

                        <div class="tablelist">
                        <div class="row mt-5 mx-auto">
                          <div class="col-3"><button class="tables" id="table1"><label id="num" value="1"><span>1</span></label></button></div>
                          <div class="col-3"><button class="tables" id="table2"><label id="num" value="2"><span>2</span></label></button></div>
                          <div class="col-3"><button class="tables" id="table3"><label id="num" value="3"><span>3</span></label></button></div>
                          <div class="col-3"><button class="tables" id="table4"><label id="num" value="4"><span>4</span></label></button></div>
                        </div>
                        <div class="row mt-5 mx-auto">
                          <div class="col-3"><button class="tables-unavailable" id="table5"><label id="num" value="5"><span>5</span></label></button></div>
                          <div class="col-3"><button class="tables" id="table6"><label id="num" value="6"><span>6</span></label></button></div>
                          <div class="col-3"><button class="tables" id="table7"><label id="num" value="7"><span>7</span></label></button></div>
                          <div class="col-3"><button class="tables" id="table8"><label id="num" value="8"><span>8</span></label></button></div>
                        </div>
                      </div>
                        <div class="row mt-5 mx-auto">
                          <div class="col"><p class="display text-center">You have not selected any table.</p></div>
                        </div>
                    </div>
                    </div>
                </section>

                <section id="step3">
                  <h1 class="text-center mt-3 mb-3">Confirm Reservation</h1>
                  <div class="row mt-3"><p class="text-center"> Please confirm your reservation.</p></div>
                  <div class="row mt-3 mx-auto">
                    <div class="col-1"></div>
                    <div class="col-3 text-end fw-bold">Reservee :</div>
                    <div class="col-4" id="name-result"></div>
                  </div>
                  <div class="row mt-3 mx-auto">
                    <div class="col-1"></div>
                    <div class="col-3 text-end fw-bold">Contact :</div>
                    <div class="col-4" id="contact-result"></div>
                  </div>
                  <div class="row mt-3 mx-auto">
                    <div class="col-1"></div>
                    <div class="col-3 text-end fw-bold">Dining pax :</div>
                    <div class="col-4" id="diner-result"></div>
                  </div>
                  <div class="row mt-3 mx-auto">
                    <div class="col-1"></div>
                    <div class="col-3 text-end fw-bold">Date :</div>
                    <div class="col-4" id="date-result"></div>
                  </div>
                  <div class="row mt-3 mx-auto">
                    <div class="col-1"></div>
                    <div class="col-3 text-end fw-bold">Time :</div>
                    <div class="col-4" id="time-result"></div>
                  </div>
                  <div class="row mt-3 mx-auto">
                    <div class="col-1"></div>
                    <div class="col-3 text-end fw-bold">Table :</div>
                    <div class="col-4" id="table-result"></div>
                  </div>
                  <div class="row mt-3 mx-auto">
                    <div class="col-1 "></div>
                    <div class="col-1 "><input class="form-check-input" type="checkbox" id="confirm1" value=""></div>
                    <div class="col-9 text-start"><label class="form-check-label">I confirm that the information above provided are all true, and the contact number is correct and valid.</label></div>
                    <div class="col-1 "></div>
                  </div>
                  <div class="row mx-auto">
                    <div class="col-1 "></div>
                    <div class="col-1 "><input class="form-check-input" type="checkbox" id="confirm2" value=""></div>
                    <div class="col-9 text-start"><label class="form-check-label">I understand that the maximum dining duration is 2 hours and the reservation is subject to void upon late arrival of more than 30 minutes.</label></div>
                  </div>
                </section>

                <div class="mt-3 flex-container">
                  <button id="prev" type="button" class="btn btn-primary">Previous</button>
                  <button id="next" type="button" class="btn btn-primary">Next</button>
                </div>

              </form>
              <div id="submitted-popup" class="overlay">
                <div class="popup">
                  <div class="tick text-center"><img src="images/green-tick.png" style="width: 70px; height:70px; margin-bottom: 20px;"></div>
                  <div class="ty text-center">Thank you for reserving with Webebey.</div>
                  <div class="content text-center" style="height: 60px; margin: 0px auto;">
                    Please go to <b>"Profile - My Bookings"</b> to proceed with pre-ordering food.
                  </div>
                  <a class="close" href="booknow.html">&times;</a>
                  <a href="booknow.html"><button class="btn btn-primary mt-3" style="display: block; margin: 0px auto;">Close</button></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
  </main>
</body>


</html>

      

        
      
  
 
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <script>
    var step1 = document.getElementById("step1");
    var step2 = document.getElementById("step2");
    var prev = document.getElementById('prev');
    var step3 = document.getElementById("step3");


    step1.style.display = "block";
    step2.style.display = "none";
    step3.style.display = "none";

    let form = document.getElementById("stepper-form");
    form.addEventListener("click", (e) => {
    // Prevent default submission except for date-input and checkbox elements
    if (e.target.type !== "date" && e.target.type !== "time" && e.target.type !== "checkbox") {
        e.preventDefault();
    }
});

var progressBar = document.getElementById("prgBar");
progressBar.style.backgroundColor = "orange";

var next = document.getElementById("next");
var prev = document.getElementById("prev");

const requiredInputs = [
  document.getElementById("lname-input"),
  document.getElementById("fname-input"),
  document.getElementById("contact-input"),
  document.getElementById("email-input"),
  document.getElementById("diner-input"),
];

// Disable Next button by default
next.disabled = true;

// Add event listeners to the required inputs
requiredInputs.forEach((input) => {
  input.addEventListener("input", () => {
    // Check if all required inputs are filled
    const allFilled = requiredInputs.every((input) => input.value.trim() !== "");
    // Enable Next button if all required inputs are filled
    next.disabled = !allFilled;
  });
});

next.addEventListener("click", () => {

//Check for step to be displayed 
if (step1.style.display === "block" && step2.style.display === "none" && step3.style.display === "none") {
    //Check for displayed step
  step2.style.display = "block";
  //Set progress bar width
  progressBar.style.width = "66%";
  //Set progress bar color to blue
  progressBar.style.backgroundColor = "rgb(11, 48, 148)";

   progressBar.innerHTML = "2";

  //And set style to none
  prev.style.visibility = 'visible';
  step1.style.display = "none";
  step3.style.display = "none";
  checkInputs();
}

else if (step2.style.display === "block" && step3.style.display === "none" && step1.style.display === "none") {
    //Check for displayed step
  step3.style.display = "block";
  //Set progress bar width
  progressBar.style.width = "100%";
  //Set progress bar color to blue
  progressBar.style.backgroundColor = "green";
   progressBar.innerHTML = "3";

  //And set style to none
  prev.style.visibility = 'visible';
  step2.style.display = "none";
  step1.style.display = "none";
  next.innerHTML = "Submit";


  var fname = document.getElementById("fname-input").value;
    var lname = document.getElementById("lname-input").value;
    var email = document.getElementById("email-input").value;
    var contact = document.getElementById("contact-input").value;
    var diner = document.getElementById("diner-input").value;
    var date = document.getElementById("date-input").value;
    var time = document.getElementById("time-input").value;

    
    
    document.getElementById("name-result").innerHTML = fname + ", " + lname;
    document.getElementById("contact-result").innerHTML = contact;
    document.getElementById("diner-result").innerHTML = diner;
    document.getElementById("date-result").innerHTML = date;
    document.getElementById("time-result").innerHTML = time;

    const checkbox1 = document.getElementById('confirm1');
    const checkbox2 = document.getElementById('confirm2');

if (checkbox1.checked && checkbox2.checked) {
  next.disabled = false;
} else {
  next.disabled = true;
}

checkbox1.addEventListener('change', () => {
  if (checkbox1.checked && checkbox2.checked) {
    next.disabled = false;
  } else {
    next.disabled = true;
  }
});

checkbox2.addEventListener('change', () => {
  if (checkbox1.checked && checkbox2.checked) {
    next.disabled = false;
  } else {
    next.disabled = true;
  }
});
}

else if (step3.style.display === "block" && step1.style.display === "none" && step2.style.display === "none") {
  const overlay = document.getElementById("submitted-popup");
  overlay.style.visibility = "visible";
  overlay.style.opacity = "1";
  //  to submit form
}

});

if (step1.style.display === "block") {
  prev.style.visibility = "hidden";
}


prev.addEventListener("click", () => {
 //Check for active step and add to it a style.display none
  if (step2.style.display === "block" && step1.style.display === "none" && step3.style.display === "none") {
        step1.style.display = "block";
        step2.style.display = "none";
        step3.style.display = "none";
        //Set progress bar width
      progressBar.style.backgroundColor = "orange";
      //Set progress bar 
      progressBar.innerHTML = "1";
      progressBar.style.width = "33%";
      prev.style.visibility = 'hidden';
      next.style.visibility = 'visible';
      next.innerHTML = "Next";
      next.disabled = false;


    } 
    else if (step3.style.display === "block" && step1.style.display === "none" && step2.style.display === "none") {
        step1.style.display = "none";
        step2.style.display = "block";
        step3.style.display = "none";
        //Set progress bar width
      progressBar.style.backgroundColor = "rgb(11, 48, 148)";
      //Set progress bar 
      progressBar.innerHTML = "2";
      progressBar.style.width = "66%";
      prev.style.visibility = 'visible';
      next.style.visibility = 'visible';
      next.innerHTML = "Next";
      checkInputs();

    }
});

const container = document.querySelector('.tablelist');
const display = document.querySelector('.display');
const inputs = form.querySelectorAll(".form-control");
let selectedButton = null;

container.addEventListener('click', e => {
  if (e.target.classList.contains('tables') &&
     !e.target.classList.contains('tables-unavailable')) {
    
    // If the clicked button is already selected, deselect it
    if (e.target.classList.contains('tables-selected')) {
      e.target.classList.remove('tables-selected');
      display.innerHTML = "You have not selected any table.";
      selectedButton = null;
      checkInputs();
      return;
    }
    
    // Deselect any previously selected button
    if (selectedButton) {
      selectedButton.classList.remove('tables-selected');
    }
    
    // Select the clicked button and update the display
    e.target.classList.add('tables-selected');
    const label = e.target.querySelector('label');
    const tableNumber = label.innerText;
    display.innerHTML = "You have selected table <b>" + tableNumber + "</b>.";
    selectedButton = e.target;
    checkInputs();
    const tableResult = document.getElementById("table-result");

    // update its innerHTML with the selected table number
    tableResult.innerHTML = tableNumber;
  }
});

function checkInputs() {
  let isValid = true;
  inputs.forEach(input => {
    if (!input.value) {
      isValid = false;
    }
  });
  
  const tableSelected = selectedButton != null;
  next.disabled = !(isValid && tableSelected);
}
    
    
      </script>
</body>

</html>